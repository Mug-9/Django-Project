{"version":3,"sources":["webpack:///./src/views/Register/Register.vue?5539","webpack:///./src/views/Register/Register.vue","webpack:///./src/network/register.js","webpack:///./src/views/Register/Register.vue?e48a"],"names":["class","model","form","ref","status-icon","rules","label-width","label","prop","type","account","autocomplete","password","passwordAgain","submitForm","cancelForm","formRegister","config","request","method","url","data","headers","name","validataAccount","rule","value","callback","console","log","Error","formCheck","emailExits","validataPassword","length","$refs","validateField","validataPasswordAgain","accountExits","validator","trigger","required","whitespace","methods","formName","this","validate","valid","formData","FormData","account_tmp","key","append","then","res","error","success","message","$store","commit","$router","replace","resetFields","render","__scopeId"],"mappings":"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","file":"static/js/chunk-ada2e19a.a6be1e18.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Register.vue?vue&type=style&index=0&id=ae9716bc&scoped=true&lang=css\"","<template>\r\n  <div class=\"main\">\r\n    <div class=\"login-div\">\r\n      <div class=\"welcome-div\">Welcome!</div>\r\n      <div class=\"form-div\">\r\n        <el-form\r\n          :model=\"form\"\r\n          ref=\"form\"\r\n          status-icon\r\n          :rules=\"rules\"\r\n          label-width=\"8em\"\r\n          class=\"form-el\"\r\n        >\r\n          <el-form-item label=\"邮箱\" prop=\"account\">\r\n            <el-input\r\n              type=\"email\"\r\n              v-model=\"form.account\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"密码\" prop=\"password\">\r\n            <el-input\r\n              type=\"password\"\r\n              v-model=\"form.password\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"重复密码\" prop=\"passwordAgain\">\r\n            <el-input\r\n              type=\"password\"\r\n              v-model=\"form.passwordAgain\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"submitForm('form')\"\r\n              >注册</el-button\r\n            >\r\n            <el-button @click=\"cancelForm('form')\">取消</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>  \r\nimport { ElMessage } from 'element-plus'\r\nimport { formRegister } from 'network/register.js'\r\nimport * as func from '@/store/mutations-type.ts'\r\n\r\nexport default {\r\n  name: \"Register\",\r\n  data () {\r\n    var validataAccount = (rule, value, callback) => {\r\n      console.log(this.form)\r\n      if (value == '') {\r\n        callback(new Error(\"账号不能为空\"))\r\n      } else if (this.formCheck.emailExits) {\r\n        callback(new Error('账号已存在'))\r\n        this.formCheck.emailExits = false\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    var validataPassword = (rule, value, callback) => {\r\n      if (value == '') {\r\n        callback(new Error(\"请输入密码\"))\r\n      } else if (value.length <= 6) {\r\n        callback(new Error('密码长度应该不短于6'))\r\n      } else if (value.length >= 20) {\r\n        callback(new Error('密码长度应该不长于20'))\r\n      } else {\r\n        if (this.form.passwordAgain != '') {\r\n          this.$refs.form.validateField('check pass')\r\n        }\r\n        callback()\r\n      }\r\n    }\r\n    var validataPasswordAgain = (rule, value, callback) => {\r\n      if (value == '') {\r\n        callback(new Error(\"请再次输入密码\"))\r\n      } else if (value != this.form.password) {\r\n        callback(new Error(\"两次密码不一致\"))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      form: {\r\n        account: '',\r\n        password: '',\r\n        passwordAgain: '',\r\n      },\r\n      formCheck: {\r\n        accountExits: false\r\n      },\r\n      rules: {\r\n        account: [\r\n          { validator: validataAccount, trigger: 'change' },\r\n          { required: true, whitespace: true }\r\n        ],\r\n        password: [\r\n          { validator: validataPassword, trigger: 'change' },\r\n          { required: true, whitespace: true }\r\n        ],\r\n        passwordAgain: [\r\n          { validator: validataPasswordAgain, trigger: 'change' },\r\n          { required: true, whitespace: true }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    submitForm (formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          let formData = new FormData()\r\n          let account_tmp = this.form.account\r\n          for (let key in this.form) {\r\n            formData.append(key, this.form[key])\r\n            console.log(key, this.form[key])\r\n          }\r\n          this.form.account = account_tmp + ' '\r\n          formRegister(formData).then(res => {\r\n            this.form.account = account_tmp\r\n            console.log(res)\r\n            if (res == \"账号已存在!\") {\r\n              ElMessage.error(res)\r\n              this.formCheck.accountExits = true\r\n            } else if (res == \"注册成功!\") {\r\n              ElMessage.success({\r\n                message: res,\r\n                type: 'success'\r\n              })\r\n              this.$store.commit(func.SETEMAIL, this.form.account)\r\n              this.$store.commit(func.SETPASSWORD, this.form.password)\r\n              this.$store.commit(func.SETACCOUNT, this.form.account)\r\n              this.$router.replace('/login')\r\n            }\r\n          })\r\n        } else {\r\n          console.log('error submit!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    cancelForm (formName) {\r\n      this.$refs[formName].resetFields()\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import \"~@/assets/css/register.css\";\r\n</style>\r\n","import { request } from './request'\r\n\r\nexport function formRegister (config) {\r\n  return request({\r\n    method: 'post',\r\n    url: 'register',\r\n    data: config,\r\n    headers: {\r\n      'Content-Type': 'application/x-www-form-urlencoded'\r\n    }\r\n  })\r\n}\r\n","import { render } from \"./Register.vue?vue&type=template&id=ae9716bc&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=ae9716bc&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-ae9716bc\"\n\nexport default script"],"sourceRoot":""}